module.exports=function(t){var e={};function r(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=7)}([function(t,e){t.exports=flarum.core.compat["common/extend"]},,function(t,e){t.exports=flarum.core.compat["forum/components/SignUpModal"]},function(t,e){t.exports=flarum.core.compat["forum/app"]},function(t,e){t.exports=flarum.core.compat["forum/components/DiscussionComposer"]},function(t,e){t.exports=flarum.core.compat["forum/components/ReplyComposer"]},function(t,e){t.exports=flarum.core.compat["common/Component"]},function(t,e,r){"use strict";r.r(e);var o=r(3),n=r.n(o),a=r(4),c=r.n(a),p=r(5),i=r.n(p),u=r(0),s=r(2),f=r.n(s);function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=r(6),h=function(t){var e,r;function o(){return t.apply(this,arguments)||this}r=t,(e=o).prototype=Object.create(r.prototype),e.prototype.constructor=e,d(e,r);var n=o.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e)},n.view=function(){return m("div",{className:"Form-group"},m("div",{className:"g-recaptcha"}))},n.oncreate=function(e){if(t.prototype.oncreate.call(this,e),this.attrs.state.render(e.dom.querySelector(".g-recaptcha")),"invisible"===app.data["fof-recaptcha.type"]){var r=e.dom.querySelector("iframe");r&&(r.tabIndex=-1)}},o}(r.n(l).a),b=function(){function t(t,e){void 0===e&&(e=null),this.callback=t,this.errorCallback=e||function(t){app.alerts.show(t)},this.widgetId=null}var e=t.prototype;return e.render=function(t){var e=this;this.widgetId=grecaptcha.render(t,{sitekey:app.data["fof-recaptcha.credentials.site"],theme:app.forum.attribute("darkMode")?"dark":"light",type:app.data["fof-recaptcha.type"],size:"invisible"===app.data["fof-recaptcha.type"]?"invisible":"normal",callback:this.callback,"error-callback":function(){var t={type:"error",content:app.translator.trans("fof-recaptcha.forum.error")};e.errorCallback(t)}})},e.getResponse=function(){return grecaptcha.getResponse(this.widgetId)},e.execute=function(){return grecaptcha.execute(this.widgetId)},e.reset=function(){return grecaptcha.reset(this.widgetId)},t}(),y=function(t){var e="invisible"===app.data["fof-recaptcha.type"];Object(u.extend)(t.prototype,"oninit",(function(){var t=this;app.forum.attribute("postWithoutCaptcha")||(this.recaptcha=new b((function(){e&&t.onsubmit("recaptchaSecondStep")})))})),Object(u.extend)(t.prototype,"data",(function(t){app.forum.attribute("postWithoutCaptcha")||(t["g-recaptcha-response"]=this.recaptcha.getResponse())})),Object(u.extend)(t.prototype,"headerItems",(function(t){app.forum.attribute("postWithoutCaptcha")||t.add("recaptcha",h.component({state:this.recaptcha}),-5)})),Object(u.extend)(t.prototype,"loaded",(function(){app.forum.attribute("postWithoutCaptcha")||this.recaptcha.reset()})),Object(u.override)(t.prototype,"onsubmit",(function(t,r){return!app.forum.attribute("postWithoutCaptcha")&&e&&"recaptchaSecondStep"!==r?(this.loading=!0,void this.recaptcha.execute()):t()}))};n.a.initializers.add("fof/recaptcha",(function(){var t;t="invisible"===app.data["fof-recaptcha.type"],Object(u.extend)(f.a.prototype,"oninit",(function(){var e=this;this.recaptcha=new b((function(){if(t){var r=new Event("submit");r.isRecaptchaSecondStep=!0,e.onsubmit(r)}}),(function(t){e.loaded(),e.alertAttrs=t}))})),Object(u.extend)(f.a.prototype,"submitData",(function(t){t["g-recaptcha-response"]=this.recaptcha.getResponse()})),Object(u.extend)(f.a.prototype,"fields",(function(t){t.add("recaptcha",h.component({state:this.recaptcha}),-5)})),Object(u.extend)(f.a.prototype,"onerror",(function(){this.recaptcha.reset()})),Object(u.override)(f.a.prototype,"onsubmit",(function(e,r){return t&&!r.isRecaptchaSecondStep?(r.preventDefault(),this.loading=!0,void this.recaptcha.execute()):e(r)})),y(c.a),y(i.a)}))}]);
//# sourceMappingURL=forum.js.map